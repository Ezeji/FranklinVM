<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Franklin's Browser VM</title>
<style>
    body { background: #000; color: #0f0; font-family: monospace; text-align: center; }
    #terminal {
        width: 90%;
        height: 500px;
        margin: 20px auto;
        padding: 10px;
        background: #111;
        border: 1px solid #444;
        overflow-y: auto;
    }
</style>
<script src="https://unpkg.com/v86/build/libv86.js"></script>
</head>

<body>

<h2>Franklinâ€™s Alpine Linux VM (Interactive Terminal)</h2>
<button onclick="startVM()">Start</button>

<pre id="terminal"></pre>

<script>
let vm = null;

function startVM() {
    if (vm) return;

    vm = new V86({
        wasm_path: "https://unpkg.com/v86/build/v86.wasm",
        memory_size: 256 * 1024 * 1024,
        vga_memory_size: 8 * 1024 * 1024,

        bzimage: {
            url: "https://raw.githubusercontent.com/AmesianX/v86-build-rootfs/master/out/bzImage"
        },
        hda: {
            url: "https://raw.githubusercontent.com/AmesianX/v86-build-rootfs/master/out/alpine.ext4"
        },

        autostart: true,
        serial_container: document.getElementById("terminal"),
        serial_rate: 115200,
    });

    // Proper keyboard attachment
    document.getElementById("terminal").addEventListener("keydown", (e) => {
        e.preventDefault();
        vm.serial0_send(e.key);
    });

    // Terminal must be focusable
    document.getElementById("terminal").tabIndex = 0;
    document.getElementById("terminal").focus();
}
</script>

</body>
</html>